@{
    ViewData["Title"] = "Upload Successfull";
}

<div class="jumbotron">
    <h3>Branding Police</h3>
    <h5>The file is successfully uploaded into the cloud blob storage</h5>
    <h5><p id="FilesToUpload">Please wait until your presentation is analized...</p></h5>    
</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>
    var resultUrl = "@ViewData["resultUri"]";


   /* function poll() {
        console.log("Polling " + resultUrl);
        $.ajax();
    }

    $.ajaxSetup({
        url: resultUrl,
        success: function (data) {
            console.log("Poll successfull");
            document.getElementById("FilesToUpload").innerHTML = resultUrl;
        },
        dataType: "text",
        complete: poll,
        timeout: 30000
    });

    (function () {
        $.ajax();
    }()); */

    var isActive = true;

    $().ready(function () {
        //EITHER USE A GLOBAL VAR OR PLACE VAR IN HIDDEN FIELD
        //IF FOR WHATEVER REASON YOU WANT TO STOP POLLING
        pollServer();
    });

    function pollServer() {
        if (isActive) {
            window.setTimeout(function () {
                $.ajax({
                    url: resultUrl,
                    type: "GET",
                    success: function (result) {
                        console.log("Poll successfull");
                        document.getElementById("FilesToUpload").innerHTML = resultUrl;

                        //pollServer();
                    },
                    error: function () {
                        console.log("Poll error");

                        pollServer();
                    }
                });
            }, 2500);
        }
    }
</script>